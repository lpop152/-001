<h1>请假</h1>
<h2>主要业务流程</h2>
学生申请请假：
学生提交请假申请时，需确保没有未销假的请假记录，否则申请失败。
状态：初始为status = 0（申请状态）。

父母审批：
父母可以对孩子的请假申请进行处理，包括同意或不同意。不同意时需填写原因。
状态更新：

同意：status = 1
不同意：status = -1
辅导员审批：
父母同意后，辅导员才能看到离校的请假申请，并进行审批。对于不离校的申请，辅导员可直接看到并处理。
状态更新：

同意：status = 2
不同意：status = -2
销假：
假期结束后，学生需要销假，销假后status = 3。

重新提交申请：
若父母或辅导员不同意，学生可以重新修改并提交申请，状态会回到status = 0。

<h2>用户角色及其功能</h2>
学生（sid）：

申请请假。
查看自己的请假申请（除了销假）。
对被拒绝的申请进行修改并重新提交。


父母（pid）：
查看孩子的请假申请。
审批孩子的请假申请（同意/不同意）。

辅导员（aid）：
查看向他提交的请假申请：
离校的申请需父母同意后才能看到。
不离校的申请可以直接看到。
审批学生请假申请（同意/不同意）。
查看请假中学生的名单及人数（按离校与未离校区分）。
查看销假状态：
假期开始但未结束的学生。
假期已结束的学生。
处理销假操作。

数据结构和状态定义
Absence对象
关键属性：
id：请假申请的唯一标识。
sid：学生 ID。
aid：辅导员 ID。
pid：父母 ID。
status：请假状态，取值：
0：申请中。
1：父母同意。
2：辅导员同意。
-1：父母不同意。
-2：辅导员不同意。
3：销假。
type：请假类型，取值：
0：在校。
1：离校。
rejectReason：拒绝原因（父母或辅导员不同意时填写）。

apply 方法：
已经完成了学生请假申请的功能。你可以继续在服务层实现详细的逻辑，例如数据校验、状态检查等。

viewByStudent 方法：
该方法用于学生查看自己的请假信息，可以查询 Absence 表中 sid（学生 ID）为给定值的数据，并排除掉已销假的记录（status != 3）。查询结果可能是学生当前的所有请假记录。

viewByParent 方法：
这个方法应该根据 parentId 获取与该家长有关的学生的请假记录，通常家长可以查看自己的孩子的请假情况。可能需要在 Absence 表中通过 sid 查找所有该学生的请假记录。

processByParent 方法：
父母同意或不同意孩子的请假申请。这将涉及修改 Absence 数据的 status 字段（可能是批准或拒绝），如果拒绝还需要提供拒绝原因。

noStart 方法：
这是辅导员查看未开始请假的学生列表的功能。可以通过查询数据库获取所有已批准的请假记录（status = 1 或 2），并根据 start 日期过滤出未开始的记录。

viewApply 方法：
这个接口是辅导员查看所有学生的请假申请（如果没有家长同意离校的话）。可以查询 Absence 表中的所有申请状态为“申请中”（status = 0）的记录，辅导员才可以看到。

processByAssistant 方法：
辅导员处理请假申请的功能。它可以修改请假的 status 和 reason，然后更新相关记录。可能涉及审批操作，并且根据是否批准来更新学生的请假状态。

viewAbsencing 方法：
查询辅导员批准的请假，并且当前时间在假期开始和结束时间之间的学生。这可能需要获取 start 和 end 时间，并使用当前时间来进行过滤。

viewNoEnd 方法：
与 viewAbsencing 类似，不过是查看已经结束的请假，end 时间小于当前时间的记录。

viewAbsencingCount 方法：
统计某个辅导员下，请假中并且未离校的学生人数。可能需要判断学生的请假状态（如status）和离校情况（可能需要新增字段来表示是否离校）。

viewAbsenceWithoutLeaving 和 viewAbsenceWithLeaving 方法：
用于查看请假中未离校和已离校的学生名单。可以通过判断 status 和离校状态来实现。

end 方法：
实现销假的功能，学生的请假状态更新为已结束（可能是status = 3）。

update 方法：
处理父母或老师不同意的请假申请，将 status 更新回申请状态，重新提交。